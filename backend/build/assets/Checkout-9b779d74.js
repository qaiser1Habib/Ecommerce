import{a as o,k as q,C as w,r as j,u as D,c as P,I as S,y as N,j as e,N as v,D as A,J as I}from"./index-769f51e0.js";import{u as $}from"./index.esm-ed08b45f.js";import{B as E}from"./BreadCrumb-ced29249.js";const J=()=>{var u,x;const{register:t,handleSubmit:y,reset:b}=$(),c=o(q),l=o(w),[k,f]=j.useState(null),[n,g]=j.useState("Cash_on_Delivery"),h=D(),{notify:p}=P(),i=o(S),r=c.reduce((s,a)=>N(a.product)*a.quantity+s,0),C=c.reduce((s,a)=>a.quantity+s,0);new Date().toLocaleDateString("en-GB");const d=s=>{console.log(s.target.value),g(s.target.value)},_=s=>{f(l.addresses[s])},F=()=>{h(I({formData:{items:c,userID:l==null?void 0:l.id,totalPrice:r,totalItems:C,selectedAddress:k,paymentMethod:n,status:"pending"},notify:p}))};return e.jsxs(e.Fragment,{children:[i&&i.paymentMethod==="Cash_on_Delivery"&&e.jsx(v,{to:"/order-success",state:{order:i},replace:!0}),i&&i.paymentMethod==="bank_transfer"&&e.jsx(v,{to:"/stripe-checkout",state:{order:i},replace:!0}),e.jsxs(e.Fragment,{children:[e.jsx(E,{page:"Checkout"}),e.jsx("section",{className:"tp-checkout-area pt-50 pb-120","data-bg-color":"#EFF1F5",style:{backgroundColor:"rgb(239, 241, 245)"},children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-7 ",children:e.jsxs("div",{className:"tp-checkout-bill-area w-100",children:[e.jsx("h3",{className:"tp-checkout-bill-title",children:"Billing Details"}),e.jsx("div",{className:"tp-checkout-bill-form",children:e.jsx("form",{onSubmit:y(s=>{h(A({formData:{...l,addresses:[...l.addresses,s]},notify:p})),b()}),children:e.jsx("div",{className:"tp-checkout-bill-inner",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"tp-checkout-input",children:[e.jsxs("label",{children:["Full Name ",e.jsx("span",{children:"*"})]}),e.jsx("input",{type:"text",...t("name",{required:"Full Name is required"}),placeholder:"Full Name"})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"tp-checkout-input",children:[e.jsxs("label",{children:["Email ",e.jsx("span",{children:"*"})]}),e.jsx("input",{type:"email",...t("email",{required:"Email is required"}),placeholder:"Email"})]})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"tp-checkout-input",children:[e.jsxs("label",{children:["Phone ",e.jsx("span",{children:"*"})]}),e.jsx("input",{type:"tel",...t("phone",{required:"phone is required"}),placeholder:""})]})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"tp-checkout-input",children:[e.jsx("label",{children:"Street address"}),e.jsx("input",{type:"text",...t("street",{required:"address is required"}),placeholder:"House number and street name"})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"tp-checkout-input",children:[e.jsx("label",{children:"Town / City"}),e.jsx("input",{type:"text",...t("city",{required:"Town / City is required"}),placeholder:""})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"tp-checkout-input",children:[e.jsx("label",{children:"State / Province"}),e.jsx("input",{type:"text",...t("state",{required:"State / Province is required"}),placeholder:""})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"tp-checkout-input",children:[e.jsx("label",{children:"County"}),e.jsxs("select",{className:"nice-select w-100",...t("county",{required:"County is required"}),children:[e.jsx("option",{value:"pakistan",children:"Pakistan"}),e.jsx("option",{value:"india",children:"India"}),e.jsx("option",{value:"china",children:"China"}),e.jsx("option",{value:"Japan",children:"Japan"})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"tp-checkout-input",children:[e.jsx("label",{children:"Postcode ZIP"}),e.jsx("input",{type:"text",...t("postcode",{required:"Postcode is required"}),placeholder:""})]})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"tp-checkout-input",children:[e.jsx("label",{children:"Order notes (optional)"}),e.jsx("textarea",{...t("notes"),placeholder:"Notes about your order, e.g. special notes for delivery."})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"tp-checkout-btn-wrapper",children:e.jsx("button",{type:"submit",className:"tp-checkout-btn w-100",children:"Add Address"})})}),l&&(l==null?void 0:l.addresses)&&((u=l==null?void 0:l.addresses)==null?void 0:u.length)>0&&e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"tp-checkout-place white-bg p-0 mt-5",children:[e.jsx("h3",{className:"tp-checkout-place-title m-0 pt-4",children:l.addresses.length===1?"Your Address":"Your Addresses"}),e.jsx("p",{children:"Choose From Existing Address"}),(x=l==null?void 0:l.addresses)==null?void 0:x.map((s,a)=>e.jsx("div",{className:"tp-order-info-list px-2 pt-2 mb-3",style:{width:"100%",background:"#ffffff",border:"1px solid #d5d8db",color:"var(--tp-common-black)"},children:e.jsxs("div",{className:"tp-checkout-option",children:[e.jsx("input",{id:`${s==null?void 0:s.name}${a}`,type:"radio",name:"addressRadioGroup",onChange:()=>_(a)}),e.jsx("label",{htmlFor:`${s==null?void 0:s.name}${a}`,className:"w-100",children:e.jsxs("ul",{className:"d-flex flex-column justify-content-between",children:[e.jsxs("li",{className:"tp-order-info-list-header",children:[e.jsx("h4",{children:s==null?void 0:s.name}),e.jsxs("h4",{children:["Phone: ",s==null?void 0:s.phone]})]}),e.jsxs("li",{className:"tp-order-info-list-desc",children:[e.jsx("p",{children:s==null?void 0:s.street}),e.jsxs("span",{children:[s==null?void 0:s.city," "]})]})]})})]})},a))]})})]})})})})]})}),e.jsx("div",{className:"col-lg-5 ",children:e.jsxs("div",{className:"tp-checkout-place white-bg w-100",children:[e.jsx("h3",{className:"tp-checkout-place-title",children:"Your Order"}),e.jsx("div",{className:"tp-order-info-list",children:e.jsxs("ul",{children:[e.jsxs("li",{className:"tp-order-info-list-header",children:[e.jsx("h4",{children:"Product"}),e.jsx("h4",{children:"Total"})]}),c&&(c==null?void 0:c.map((s,a)=>{var m;return e.jsxs("li",{className:"tp-order-info-list-desc",children:[e.jsxs("p",{children:[(m=s==null?void 0:s.product)==null?void 0:m.title,". ",e.jsxs("span",{className:"fw-bold",children:[" Qty: ",s==null?void 0:s.quantity]})]}),e.jsx("span",{children:N(s==null?void 0:s.product)})]},a)})),e.jsxs("li",{className:"tp-order-info-list-subtotal",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",r,".00"]})]}),e.jsxs("li",{className:"tp-order-info-list-shipping",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("div",{className:"tp-order-info-list-shipping-item d-flex flex-column align-items-end",children:[e.jsxs("span",{children:[e.jsx("input",{id:"flat_rate",type:"radio",name:"shipping"}),e.jsxs("label",{htmlFor:"flat_rate",children:["Flat rate: ",e.jsx("span",{children:"$20.00"})]})]}),e.jsxs("span",{children:[e.jsx("input",{id:"local_pickup",type:"radio",name:"shipping"}),e.jsxs("label",{htmlFor:"local_pickup",children:["Local pickup: ",e.jsx("span",{children:"$25.00"})]})]}),e.jsxs("span",{children:[e.jsx("input",{id:"free_shipping",type:"radio",name:"shipping"}),e.jsx("label",{htmlFor:"free_shipping",children:"Free shipping"})]})]})]}),e.jsxs("li",{className:"tp-order-info-list-total",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",r,".00"]})]})]})}),e.jsxs("div",{className:"tp-checkout-payment-item",children:[e.jsx("input",{type:"radio",id:"cod",name:"payment",checked:n==="Cash_on_Delivery",value:"Cash_on_Delivery",onChange:s=>d(s)}),e.jsx("label",{htmlFor:"cod",children:"Cash on Delivery"})]}),e.jsxs("div",{className:"tp-checkout-payment",children:[e.jsxs("div",{className:"tp-checkout-payment-item",children:[e.jsx("input",{type:"radio",id:"bank_transfer",value:"bank_transfer",name:"payment",onChange:s=>d(s),checked:n==="bank_transfer"}),e.jsx("label",{htmlFor:"bank_transfer","data-bs-toggle":"direct-bank-transfer",children:"Direct Bank Transfer"})]}),e.jsxs("div",{className:"tp-checkout-payment-item paypal-payment",children:[e.jsx("input",{type:"radio",id:"paypal",name:"payment",value:"paypal",onChange:s=>d(s),checked:n==="paypal"}),e.jsxs("label",{htmlFor:"paypal",children:["PayPal ",e.jsx("img",{src:"assets/img/icon/payment-option.png",alt:""})]})]})]}),e.jsx("div",{className:"tp-checkout-agree",children:e.jsxs("div",{className:"tp-checkout-option",children:[e.jsx("input",{id:"read_all",type:"checkbox"}),e.jsx("label",{htmlFor:"read_all",children:"I have read and agree to the website."})]})}),e.jsx("div",{className:"tp-checkout-btn-wrapper",children:e.jsx("button",{onClick:()=>F(),className:"tp-checkout-btn w-100",children:"Place Order"})})]})})]})})})]})]})};export{J as default};
